#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

void printCuteMessage(){
    printf("\n");
    printf("                                                                                                                                                                                               \n");
    printf("                                                                                                                                                                                               \n");
    printf("IIIIIIIIII     LLLLLLLLLLL                                                                           YYYYYYY       YYYYYYY                                                   333333333333333   \n");
    printf("I::::::::I     L:::::::::L                                                                           Y:::::Y       Y:::::Y                                           <<<<<<<3:::::::::::::::33 \n");
    printf("I::::::::I     L:::::::::L                                                                           Y:::::Y       Y:::::Y                                          <:::::< 3::::::33333::::::3\n");
    printf("II::::::II     LL:::::::LL                                                                           Y::::::Y     Y::::::Y                                         <:::::<  3333333     3:::::3\n");
    printf("  I::::I         L:::::L                  ooooooooooo vvvvvvv           vvvvvvv eeeeeeeeeeee         YYY:::::Y   Y:::::YYYooooooooooo   uuuuuu    uuuuuu          <:::::<               3:::::3\n");
    printf("  I::::I         L:::::L                oo:::::::::::oov:::::v         v:::::vee::::::::::::ee          Y:::::Y Y:::::Y oo:::::::::::oo u::::u    u::::u         <:::::<                3:::::3\n");
    printf("  I::::I         L:::::L               o:::::::::::::::ov:::::v       v:::::ve::::::eeeee:::::ee         Y:::::Y:::::Y o:::::::::::::::ou::::u    u::::u        <:::::<         33333333:::::3 \n");
    printf("  I::::I         L:::::L               o:::::ooooo:::::o v:::::v     v:::::ve::::::e     e:::::e          Y:::::::::Y  o:::::ooooo:::::ou::::u    u::::u       <:::::<          3:::::::::::3  \n");
    printf("  I::::I         L:::::L               o::::o     o::::o  v:::::v   v:::::v e:::::::eeeee::::::e           Y:::::::Y   o::::o     o::::ou::::u    u::::u        <:::::<         33333333:::::3 \n");
    printf("  I::::I         L:::::L               o::::o     o::::o   v:::::v v:::::v  e:::::::::::::::::e             Y:::::Y    o::::o     o::::ou::::u    u::::u         <:::::<                3:::::3\n");
    printf("  I::::I         L:::::L               o::::o     o::::o    v:::::v:::::v   e::::::eeeeeeeeeee              Y:::::Y    o::::o     o::::ou::::u    u::::u          <:::::<               3:::::3\n");
    printf("  I::::I         L:::::L         LLLLLLo::::o     o::::o     v:::::::::v    e:::::::e                       Y:::::Y    o::::o     o::::ou:::::uuuu:::::u           <:::::<              3:::::3\n");
    printf("II::::::II     LL:::::::LLLLLLLLL:::::Lo:::::ooooo:::::o      v:::::::v     e::::::::e                      Y:::::Y    o:::::ooooo:::::ou:::::::::::::::uu          <:::::< 3333333     3:::::3\n");
    printf("I::::::::I     L::::::::::::::::::::::Lo:::::::::::::::o       v:::::v       e::::::::eeeeeeee           YYYY:::::YYYY o:::::::::::::::o u:::::::::::::::u           <<<<<<<3::::::33333::::::3\n");
    printf("I::::::::I     L::::::::::::::::::::::L oo:::::::::::oo         v:::v         ee:::::::::::::e           Y:::::::::::Y  oo:::::::::::oo   uu::::::::uu:::u                  3:::::::::::::::33 \n");
    printf("IIIIIIIIII     LLLLLLLLLLLLLLLLLLLLLLLL   ooooooooooo            vvv            eeeeeeeeeeeeee           YYYYYYYYYYYYY    ooooooooooo       uuuuuuuu  uuuu                   333333333333333   \n");
    printf("                                                                                                                                                                                               \n");
    printf("                                                                                                                                                                                               \n");
    printf("\n");

    printf("\n");
    printf("                                                                                                                                                                                                                             \n");
    printf("                                                                                               dddddddd                                                                    bbbbbbbb                                         \n");
    printf("WWWWWWWW                           WWWWWWWW                                lllllll             d::::::d                                                                    b::::::b                                         \n");
    printf("W::::::W                           W::::::W                                l:::::l             d::::::d                                                                    b::::::b                                         \n");
    printf("W::::::W                           W::::::W                                l:::::l             d::::::d                                                                    b::::::b                                         \n");
    printf("W::::::W                           W::::::W                                l:::::l             d:::::d                                                                      b:::::b                                         \n");
    printf(" W:::::W           WWWWW           W:::::W ooooooooooo   uuuuuu    uuuuuu   l::::l     ddddddddd:::::d      yyyyyyy           yyyyyyy ooooooooooo   uuuuuu    uuuuuu        b:::::bbbbbbbbb        eeeeeeeeeeee             \n");
    printf("  W:::::W         W:::::W         W:::::Woo:::::::::::oo u::::u    u::::u   l::::l   dd::::::::::::::d       y:::::y         y:::::yoo:::::::::::oo u::::u    u::::u        b::::::::::::::bb    ee::::::::::::ee           \n");
    printf("   W:::::W       W:::::::W       W:::::Wo:::::::::::::::ou::::u    u::::u   l::::l  d::::::::::::::::d        y:::::y       y:::::yo:::::::::::::::ou::::u    u::::u        b::::::::::::::::b  e::::::eeeee:::::ee         \n");
    printf("    W:::::W     W:::::::::W     W:::::W o:::::ooooo:::::ou::::u    u::::u   l::::l d:::::::ddddd:::::d         y:::::y     y:::::y o:::::ooooo:::::ou::::u    u::::u        b:::::bbbbb:::::::be::::::e     e:::::e         \n");
    printf("     W:::::W   W:::::W:::::W   W:::::W  o::::o     o::::ou::::u    u::::u   l::::l d::::::d    d:::::d          y:::::y   y:::::y  o::::o     o::::ou::::u    u::::u        b:::::b    b::::::be:::::::eeeee::::::e         \n");
    printf("      W:::::W W:::::W W:::::W W:::::W   o::::o     o::::ou::::u    u::::u   l::::l d:::::d     d:::::d           y:::::y y:::::y   o::::o     o::::ou::::u    u::::u        b:::::b     b:::::be:::::::::::::::::e          \n");
    printf("       W:::::W:::::W   W:::::W:::::W    o::::o     o::::ou::::u    u::::u   l::::l d:::::d     d:::::d            y:::::y:::::y    o::::o     o::::ou::::u    u::::u        b:::::b     b:::::be::::::eeeeeeeeeee           \n");
    printf("        W:::::::::W     W:::::::::W     o::::o     o::::ou:::::uuuu:::::u   l::::l d:::::d     d:::::d             y:::::::::y     o::::o     o::::ou:::::uuuu:::::u        b:::::b     b:::::be:::::::e                    \n");
    printf("         W:::::::W       W:::::::W      o:::::ooooo:::::ou:::::::::::::::uul::::::ld::::::ddddd::::::dd             y:::::::y      o:::::ooooo:::::ou:::::::::::::::uu      b:::::bbbbbb::::::be::::::::e                   \n");
    printf("          W:::::W         W:::::W       o:::::::::::::::o u:::::::::::::::ul::::::l d:::::::::::::::::d              y:::::y       o:::::::::::::::o u:::::::::::::::u      b::::::::::::::::b  e::::::::eeeeeeee           \n");
    printf("           W:::W           W:::W         oo:::::::::::oo   uu::::::::uu:::ul::::::l  d:::::::::ddd::::d             y:::::y         oo:::::::::::oo   uu::::::::uu:::u      b:::::::::::::::b    ee:::::::::::::e           \n");
    printf("            WWW             WWW            ooooooooooo       uuuuuuuu  uuuullllllll   ddddddddd   ddddd            y:::::y            ooooooooooo       uuuuuuuu  uuuu      bbbbbbbbbbbbbbbb       eeeeeeeeeeeeee           \n");
    printf("                                                                                                                  y:::::y                                                                                                   \n");
    printf("                                                                                                                 y:::::y                                                                                                   \n");
    printf("                                                                                                                y:::::y                                                                                                   \n");
    printf("                                                                                                               y:::::y                                                                                                   \n");
    printf("                                                                                                              yyyyyyy                                                                                                   \n");
    printf("                                                                                                                                                                                                                             \n");
    printf("                                                                                                                                                                                                                             \n");
    printf("                                                                                                                                                                                                                ???????     \n");
    printf("                                                                                                                                                                                                              ??:::::::??   \n");
    printf("                                                                                             lllllll                                                tttt            iiii                                    ??:::::::::::?  \n");
    printf("                                                                                             l:::::l                                             ttt:::t           i::::i                                  ?:::::????:::::? \n");
    printf("                                                                                             l:::::l                                             t:::::t            iiii                                   ?::::?    ?::::? \n");
    printf("                                                                                             l:::::l                                             t:::::t                                                   ?::::?     ?::::?\n");
    printf("   mmmmmmm    mmmmmmm yyyyyyy           yyyyyyy     vvvvvvv           vvvvvvvaaaaaaaaaaaaa    l::::l     eeeeeeeeeeee    nnnn  nnnnnnnn    ttttttt:::::ttttttt    iiiiiiinnnn  nnnnnnnn        eeeeeeeeeeee??????     ?::::?\n");
    printf(" mm:::::::m  m:::::::mmy:::::y         y:::::y       v:::::v         v:::::v a::::::::::::a   l::::l   ee::::::::::::ee  n:::nn::::::::nn  t:::::::::::::::::t    i:::::in:::nn::::::::nn    ee::::::::::::ee        ?::::? \n");
    printf("m::::::::::mm::::::::::my:::::y       y:::::y         v:::::v       v:::::v  aaaaaaaaa:::::a  l::::l  e::::::eeeee:::::een::::::::::::::nn t:::::::::::::::::t     i::::in::::::::::::::nn  e::::::eeeee:::::ee     ?::::?  \n");
    printf("m::::::::::::::::::::::m y:::::y     y:::::y           v:::::v     v:::::v            a::::a  l::::l e::::::e     e:::::enn:::::::::::::::ntttttt:::::::tttttt     i::::inn:::::::::::::::ne::::::e     e:::::e    ?::::?   \n");
    printf("m:::::mmm::::::mmm:::::m  y:::::y   y:::::y             v:::::v   v:::::v      aaaaaaa:::::a  l::::l e:::::::eeeee::::::e  n:::::nnnn:::::n      t:::::t           i::::i  n:::::nnnn:::::ne:::::::eeeee::::::e   ?::::?    \n");
    printf("m::::m   m::::m   m::::m   y:::::y y:::::y               v:::::v v:::::v     aa::::::::::::a  l::::l e:::::::::::::::::e   n::::n    n::::n      t:::::t           i::::i  n::::n    n::::ne:::::::::::::::::e   ?::::?     \n");
    printf("m::::m   m::::m   m::::m    y:::::y:::::y                 v:::::v:::::v     a::::aaaa::::::a  l::::l e::::::eeeeeeeeeee    n::::n    n::::n      t:::::t           i::::i  n::::n    n::::ne::::::eeeeeeeeeee    ?::::?     \n");
    printf("m::::m   m::::m   m::::m     y:::::::::y                   v:::::::::v     a::::a    a:::::a  l::::l e:::::::e             n::::n    n::::n      t:::::t    tttttt i::::i  n::::n    n::::ne:::::::e             ??::??     \n");
    printf("m::::m   m::::m   m::::m      y:::::::y                     v:::::::v      a::::a    a:::::a l::::::le::::::::e            n::::n    n::::n      t::::::tttt:::::ti::::::i n::::n    n::::ne::::::::e             ????      \n");
    printf("m::::m   m::::m   m::::m       y:::::y                       v:::::v       a:::::aaaa::::::a l::::::l e::::::::eeeeeeee    n::::n    n::::n      tt::::::::::::::ti::::::i n::::n    n::::n e::::::::eeeeeeee               \n");
    printf("m::::m   m::::m   m::::m      y:::::y                         v:::v         a::::::::::aa:::al::::::l  ee:::::::::::::e    n::::n    n::::n        tt:::::::::::tti::::::i n::::n    n::::n  ee:::::::::::::e     ???       \n");
    printf("mmmmmm   mmmmmm   mmmmmm     y:::::y                           vvv           aaaaaaaaaa  aaaallllllll    eeeeeeeeeeeeee    nnnnnn    nnnnnn          ttttttttttt  iiiiiiii nnnnnn    nnnnnn    eeeeeeeeeeeeee    ??:??       \n");
    printf("                            y:::::y                                                                                                                                                                               ???       \n");
    printf("                           y:::::y                                                                                                                                                                                           \n");
    printf("                          y:::::y                                                                                                                                                                                            \n");
    printf("                         y:::::y                                                                                                                                                                                             \n");
    printf("                        yyyyyyy                                                                                                                                                                                              \n");
    printf("\n");
}

int main() {
  char x[2];

  char sentence[] = "Would you be my valentine";
  int length = strlen(sentence);
  char guesses[length + 1]; // +1 for null terminator
  int randomHints[length];

  int strikes = 0;

  char guess = ' ';

  // Seed the random number generator ONCE
  srand(time(0));

  // Generate random numbers

  int i;
  for (int i = 0; i < length;) {
    int r = rand() % length;
    randomHints[i] = r;
    i++;
  }

  // Bubble sort to order randomHints array
  bool ordered = false;
  while (!ordered) {
    ordered = true;
    for (int i = 0; i < length - 1; i++) {
      int curr = randomHints[i];
      int next = randomHints[i + 1]; // FIXED: i + 1 instead of i + i

      if (curr > next) {
        ordered = false;
        randomHints[i + 1] = curr;
        randomHints[i] = next;
      }
    }
  }

  // Print random numbers after sorting
  printf("Sorted random numbers: ");
  for (int i = 0; i < length; i++) {
    printf("%d ", randomHints[i]);
  }
  printf("\n");

  // Generate guesses array
  for (int i = 0; i < length; i++) {
    if (i == randomHints[i]) {
      guesses[i] = sentence[i];
      continue;
    }
    guesses[i] = (sentence[i] == ' ') ? ' ' : '_';
  }
  guesses[length] = '\0'; // Ensure it's a valid string

  while (true) {
    system("clear");

    for (int i = 0; i < 10; i++) {
      printf("\n");
    }

    printf("   -----------------\n");
    printf("   |               |\n");
    printf("   |             (* *) \n");
    printf("   |              /|\\ \n");
    printf("   |               |\n");
    printf("   |              /|\\\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("   |\n");
    printf("___0________\n");
    printf("============\n");
    printf("============\n");

    for (int i = 0; i < 10; i++) {
      printf("\n");
    }

    printf("STRIKES: ");
    for (int i = 0; i < strikes; i++) {
      printf("X ");
    }

    printf("\n");

    if (strikes > 3) {
      system("clear");

      for (int i = 0; i < 10; i++) {
        printf("\n");
      }

      printf("   -----------------\n");
      printf("   |               |\n");
      printf("   |             (x x) \n");
      printf("   |              /|\\ \n");
      printf("   |               |\n");
      printf("   |              /|\\\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("   |\n");
      printf("___0________\n");
      printf("============\n");
      printf("============\n");

      for (int i = 0; i < 10; i++) {
        printf("\n");
      }

      printf("YOU LOSE!\n");
      return 0;
    }

    // Display the guessed sentence
    printf("Guess: \n\n");
    printf("%s\n", guesses);

    // Read user input
    guess = getchar();

    // Flag to track whether the guess was correct
    bool correct = false;
    bool *correctPtr = &correct;

    for (int i = 0; i < length; i++) {
      // Check if the guessed character exists in the sentence
      if (sentence[i] == guess) {
        guesses[i] = guess; // Replace `_` with the correct character
        *correctPtr = true;
      }
    }

    // If incorrect, increment strikes
    if (correct) {
      continue;
    }

    bool win = true;
    for (int i = 0; i < length; i++) {
      if (guesses[i] != sentence[i]) {
        win = false;
      }
    }

    if (win) {
      system("clear");
      for (int i = 0; i < 10; i++) {
        printf("\n");
      }

      printCuteMessage();

      return 0;
    }

  }
  return 0;
}
